{% load utils %}

<table class="table table-bordered bg-white">
    <tr class="thead-dark">
        <th class="text-center align-middle">#</th>
        <th class=" align-middle" style="width: 30%">Item name</th>
        <th class="text-center align-middle">Score 1</th>
        <th class="text-center align-middle">Int 1</th>
        <th class="text-center align-middle">Score 2</th>
        <th class="text-center align-middle">Int 2</th>
        <th class="text-center align-middle">Diff sco</th>
        <th class="text-center align-middle">Avg sco</th>
        <th class="text-center align-middle">Avg int</th>
    </tr>
    {% for comparison in comparisons %}
    <tr>
        <td class="text-center align-middle">{{ forloop.counter }}</td>
        <td class=" align-middle"><a href="{% url 'item' comparison.item.id %}">{{ comparison.item.name }}</a></td>
        <td class="text-center align-middle">{{ comparison.rating1|floatformat }}</td>
        <td class="text-center align-middle">{{ comparison.interest1|floatformat }}</td>
        <td class="text-center align-middle">
            <div class="rating-stars text-center">
                <ul class="stars mb-0" data-value="{{ comparison.item.id}}">

                    {%get_user_score_by_item request.user comparison.item as your_score%}

                    <li class="star {% if your_score >= 1 %}selected{% endif %}"
                        title="Horrible" data-value="1">
                        <i class='fa fa-star fa-fw'></i>
                    </li>
                    <li class="star {% if your_score >= 2 %}selected{% endif %}"
                        title="Bad" data-value="2">
                        <i class='fa fa-star fa-fw'></i>
                    </li>
                    <li class="star {% if your_score >= 3 %}selected{% endif %}"
                        title="Normal" data-value="3">
                        <i class='fa fa-star fa-fw'></i>
                    </li>
                    <li class="star {% if your_score >= 4 %}selected{% endif %}"
                        title="Good" data-value="4">
                        <i class='fa fa-star fa-fw'></i>
                    </li>
                    <li class="star {% if your_score >= 5 %}selected{% endif %}"
                        title="Excellent" data-value="5">
                        <i class='fa fa-star fa-fw'></i>
                    </li>
                </ul>
            </div>
        </td>
        <td class="text-center align-middle">
            <div class="interest-flames text-center">
                <ul class="flames mb-0" data-value="{{ comparison.item.id }}">
                    <li class="flame {% if comparison.interest2 >= 1 %}selected{% endif %}"
                        title="Not interested" data-value="1">
                        <i class="fas fa-fire"></i>
                    </li>
                    <li class="flame {% if comparison.interest2 >= 2 %}selected{% endif %}"
                        title="Interested" data-value="2">
                        <i class="fas fa-fire"></i>
                    </li>
                    <li class="flame {% if comparison.interest2 >= 3 %}selected{% endif %}"
                        title="Very interested!" data-value="3">
                        <i class="fas fa-fire"></i>
                    </li>
                </ul>
            </div>
        </td>
        <td class="text-center align-middle">{{ comparison.rating_difference|floatformat }}</td>
        <td class="text-center align-middle">{{ comparison.avg_rating|floatformat }}</td>
        <td class="text-center align-middle">{{ comparison.avg_interest|floatformat }}</td>
    </tr>
    {% endfor %}
</table>