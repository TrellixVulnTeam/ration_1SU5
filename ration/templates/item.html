{% extends "base.html" %}

{% load humanize %}

{% block content %}

<div class="mt-3 pt-3 pb-3 pl-4 container bg-white">
    <h1>
        {{ item.name }}

        <!-- Edit -->
        {% if request.user == item.creator %}
        <a class="ml-3" href="{% url 'edit_item' item.id %}"><i
                class="material-icons align-middle text-primary">edit</i></a>
        <a class="ml-3" href="{% url 'delete_item' item.id %}"><i
                class="material-icons align-middle text-danger">delete_forever</i></a>
        {% endif %}
    </h1>

    <!-- Tag -->
    <h3>#{{ item.tag }}</h3>

    <!-- Image -->
    {% ifnotequal item.image None %}
    {% ifnotequal item.image '' %}
    <img src="/media/{{ item.image }}" width="250px"/>
    {% endifnotequal %}
    {% endifnotequal %}

    <!-- Creator and timestamp -->
    <h5>
        <a href="{% url 'user' item.creator.username %}">@{{ item.creator.username }}</a>
        <small class="text-muted"> â€¢ {{item.created_at|naturaltime}}</small>
    </h5>


    {% ifnotequal item.avg_rating None %}
    <h5>Site rating: {{ item.avg_rating|floatformat }}</h5>
    {% endifnotequal %}
    <p>{{ item.description }}</p>

    {% if request.user.is_authenticated %}
    <form method="POST">
        {% csrf_token %}
        <p>
            YOUR RATING: <input type="number" id="your-rating" min="1" max="5" name="rating"
                                value="{{  user_item.rating|floatformat }}"/> / 5
        </p>
        <p>YOUR INTEREST: <input type="number" id="your-interest" name="interest" max="3" min="1"
                                 value="{{ user_item.interest|floatformat}}"/> / 3</p>

        <button type="submit" class="mr-3 mb-3 btn btn-primary">Save</button>
    </form>
    {% endif %}

</div>

{% endblock %}
