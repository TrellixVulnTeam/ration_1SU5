{% extends "base.html" %}

{% block content %}

<div class="mt-3 pb-2 container">

    <div class="row">

        <!-- Left container -->
        <div class="col-2 pl-0 pr-0">
            {% include 'includes/your_user_left_container.html' %}
        </div>

        <!-- Middle container -->
        <div class="col-7 ">
            <div class="container bg-white">
                <div class="pl-2 pt-3">

                    <h3>
                        {% if taglist %}
                        Edit taglist
                        {% else %}
                        New Taglist
                        {% endif %}
                    </h3>

                    <form method="POST">
                        {% csrf_token %}

                        <!-- Errors -->
                        {% for field in form %}
                        {% for error in field.errors %}
                        {% include 'includes/form_error.html' %}
                        {% endfor %}
                        {% endfor %}

                        <!-- Name -->
                        <div class="form-group">
                            <label for="name">Name (required): </label>
                            <input id="name" name="name" type="text"
                                   class="form-control"
                                   value="{{ taglist.name }}">
                        </div>

                        <!-- Tags -->
                        <div class="form-group">
                            <label for="tags">Tags (required): </label>
                            <input id="tags" name="tags" type="text" class="form-control"
                            value="{% for tag in taglist.tags.all %}{{ tag.name}}; {% endfor %}">
                        </div>

                        <!-- Description -->
                        <div class="form-group">
                            <label for="description">Description: </label>
                            <textarea id="description" name="description" class="form-control"
                                      rows="3">{{ taglist.description }}</textarea>
                        </div>

                        <!-- Is private -->
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox"
                                   name="is_private" id="is_private"
                                   {% if taglist.is_private %}
                                   checked
                                   {% endif %}
                            />
                            <label class="form-check-label" for="is_private">
                                Private taglist (only you will see it)
                            </label>
                        </div>

                        <!-- Is main -->
                        <div class="form-check">

                            <input class="form-check-input" type="checkbox"
                                   name="is_main" id="is_main"
                                   {% if taglist.is_main %}
                                   checked
                                   {% endif %}
                            />
                            <label class="form-check-label" for="is_main">
                                Main taglist (will appear on your profile)
                            </label>
                        </div>

                        <!-- Save -->
                        <button type="submit" class="mt-3 mb-3 btn btn-primary">Save</button>

                    </form>
                </div>


            </div>

        </div>

        <!-- Right container -->
        <div class="col-3 bg-white">

            <!-- 10 latest items -->
            <div class="mt-3">
                <h5 class="d-inline ">Newest items</h5>
                <small class="ml-1 mr-1 font-weight-bold ">Â·</small>
                <a class="d-inline" href="{% url 'items' %}">
                    <small>View all</small>
                </a>
            </div>


            <ul class="pl-0 mt-2 no-bullets">
                {% for item in latest_items %}
                <li class=" pt-3 pb-3">

                    <div class="row ">

                        <div class="col-4 pl-0 pr-0 ">
                            <!-- Image -->
                            {% ifnotequal item.image None %}
                            {% ifnotequal item.image '' %}
                            <div class="d-flex justify-content-center">
                                <a class="" href="{% url 'item' item.id %}">
                                    <img class="" width="75px" height="75px"
                                         src="/media/{{ item.image }}"
                                    /></a>
                            </div>

                            {% endifnotequal %}
                            {% endifnotequal %}
                        </div>

                        <div class="col-8 pl-0 pr-0">
                            <a href="{% url 'item' item.id %}">{{ item.name|slice:"50"}}{% if item.name|length > 50 %}
                                ... {% endif%}</a>
                            <br>
                            <a class="no-underline" href="">
                                <span class="badge badge-light font-weight-normal">
                                    #{{ item.tag }}
                                </span>
                            </a>
                        </div>

                    </div>


                </li>
                {% endfor %}
            </ul>
        </div>


    </div>


</div>

{% endblock %}
